<html>

<head>
	<!-- https://www.geeksforgeeks.org/jquery/how-to-fetch-data-from-json-file-and-display-in-html-table-using-jquery/ -->
	<title>nombre del documento web</title>
	<meta charset="UTF-8">
	<meta name="description" content"Instituto encargada de agilizar la documentación migratoria asimismo el ingreso
		rápido y seguro a México">
	<meta keywords="Migración, documentación, instituto, migratoria, ingreso, México">

	<link rel="stylesheet" href="css/uikit.min.css" />
	<script src="js/uikit.min.js"></script>
	<script src="js/uikit-icons.min.js"></script>
	<script src="./jquery-3.7.1.js"></script>
	<style>
		.contenedor {
			margin-top: 100px;
		}
	</style>

</head>

<body>

	<!-- Encabezado -->
	<header class="headerD ">
		<nav class="uk-navbar-container uk-position-fixed uk-position-top uk-position-z-index"
			style="background: #3a665e; padding: 10px 0px;">
			<div class="uk-container">
				<div uk-navbar>

					<div class="uk-navbar-left">

						<ul class="uk-navbar-nav">
							<li class="">
								<a href="#"><img src="./banner.png" /></a>
							</li>
						</ul>

					</div>

					<div class="uk-navbar-right">

						<ul class="uk-navbar-nav">
							<li class="uk-active">
								<a href="https://www.gob.mx/inm">
									<img src="./logo.png" />
								</a>
							</li>
						</ul>

					</div>

				</div>
			</div>
		</nav>
	</header>

	<main class="contenedor uk-width-4-5 uk-margin-auto-left uk-margin-auto-right">
		<h1 class="uk-text-center uk-padding-small">Registros del INM</h1>

		<!-- Formulario -->
		<section class="uk-section uk-width-3-5 uk-margin-auto-left uk-margin-auto-right">
			<div class="uk-card uk-card-default uk-card-body">
				<h3 class="uk-card-title">Realizar nuevo registro</h3>
				<form class="uk-form-stacked">
					<div class="uk-margin">
						<label class="uk-form-label" for="form-stacked-text">Nombre</label>
						<div class="uk-form-controls">
							<input class="uk-input" id="form-stacked-text" type="text" placeholder="Nombre...">
						</div>
					</div>
					<div class="uk-margin">
						<label class="uk-form-label" for="form-stacked-text">Edad</label>
						<div class="uk-form-controls">
							<input class="uk-input" id="form-stacked-text" type="number" placeholder="" min="1">
						</div>
					</div>
					<div class="uk-margin">
						<label class="uk-form-label" for="form-stacked-text">Domicilio</label>
						<div class="uk-form-controls">
							<input class="uk-input" id="form-stacked-text" type="text" placeholder="Domicilio...">
						</div>
					</div>
					<button class="uk-button uk-button-primary">Guardar nuevo registro</button>
				</form>
			</div>
		</section>

		<!-- Botones de carga -->
		<div>
			<p uk-margin>
				<button class="uk-button uk-button-default" id="cJson">Cargar en JSON</button>
				<button class="uk-button uk-button-primary" id="cCsv">Cargar en CSV</button>
			</p>
		</div>

		<!-- Tabla -->
		<section class="uk-section uk-overflow-auto">
			<table class="uk-table uk-table-divider uk-table-justify">
				<thead>
					<tr>
						<th>Nombre de la persona</th>
						<th>Edad</th>
						<th>Domicilio</th>
					</tr>
				</thead>
				<tbody id="bodyT">
				</tbody>
			</table>
		</section>

		<div>
			<p uk-margin>
				<button class="uk-button uk-button-default" id="gJson">Guardar en JSON</button>
				<button class="uk-button uk-button-primary" id="gCsv">Guardar en CSV</button>
			</p>
		</div>

		<hr>

		<!-- Footer -->
		<footer class="uk-section">
			<div>
				<h2 class="uk-text-center">Información adicional</h2>

				<div class="uk-child-width-1-3@m uk-grid-small uk-grid-match" uk-grid>
					<div>
						<div class="uk-card uk-card-default uk-card-body">
							<h3 class="uk-card-title">¿Qué hacemos?</h3>
							<p>El Instituto Nacional de Migración en cumplimiento con las leyes mexicanas y tratados
								internacionales aplica de manera permanente diversas disposiciones, para otorgarles
								a todos los extranjeros las facilidades necesarias para llevar a cabo procedimientos
								migratorios legales, ordenados y seguros que permitan su ingreso y estancia en
								territorio nacional con estricto apego a proteger los derechos humanos,
								implementando los ordenamientos establecidos en la Ley de Migración y su reglamento.
							</p>
						</div>
					</div>
					<div>
						<div class="uk-card uk-card-default uk-card-body">
							<h3 class="uk-card-title">Misión</h3>
							<p>Instrumentar la política en materia migratoria bajo los principios de respeto y
								seguridad de las personas migrantes nacionales y extranjeras con independencia de su
								situación migratoria durante su ingreso, tránsito y salida del territorio nacional,
								reconociéndolos como sujetos de derecho, mediante la eficiencia y eficacia de los
								trámites y procedimientos migratorios, para contribuir a que la movilidad y
								migración internacional sea ordenada, segura y regular con base en el marco legal y
								con pleno respeto a los derechos humanos.</p>
						</div>
					</div>
					<div>
						<div class="uk-card uk-card-default uk-card-body">
							<h3 class="uk-card-title">Visión</h3>
							<p>Ser la Institución que garantice una gestión migratoria con pleno respeto a las
								personas migrantes, bajo un esquema de profesionalización de los servidores
								públicos, orientada a procesos, con incorporación de tecnologías de la información,
								facilitando y simplificando trámites y procedimientos migratorios y fortaleciendo
								acciones de control, revisión y verificación migratoria para una migración segura,
								ordenada y regular.</p>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</main>

	<script>
		var tbody = "#bodyT";

		$(document).ready(function () {
			$("#cJson").click(function () {
				$.getJSON("./datos.json", function (data) {
					var items = "";

					$.each(data, function (key, val) {
						items += `
					<tr>
						<td>${val.nombre}</td>
						<td>${val.edad}</td>
						<td>${val.domicilio}</td>
					</tr>
					`;
					});
					$(tbody).html(items);
				});
			});

			$("#cCsv").click(function () {
				$.ajax({
					url: "./datos.csv",
					dataType: "text",
					success: function (data) {
						var datos = data.split(/\r?\n|\r/);
						var table_data = '<table class="">';
						for (var count = 1; count < datos.length; count++) {
							var datosCelda = datos[count].split(",");
							table_data += '<tr>';
							for (var cell_count = 0; cell_count < datosCelda.length; cell_count++) {
								table_data += '<td>' + datosCelda[cell_count] + '</td>';
							}

							table_data += '</tr>';
						}
						table_data += '</table>';
						$(tbody).html(table_data);
					}
				});
			});

			$("#gJson").click(function () {
				var tableData = [];
				var $headers = $("thead th");

				$("tbody tr").each(function () {
					var rowData = {};
					$(this).find("td").each(function (index) {
						var columnName = $headers.eq(index).text();
						rowData[columnName] = $(this).text();
					});
					tableData.push(rowData);
				});

				var jsonString = JSON.stringify(tableData);
				console.log(jsonString);
			});
		});

	</script>
</body>

</html>